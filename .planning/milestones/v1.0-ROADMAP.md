# Milestone v1.0: Config Cleanup

**Status:** ✅ SHIPPED 2026-01-19
**Phases:** 1-2
**Total Plans:** 3

## Overview

This project cleans up legacy Claude Code configuration and establishes a clean three-layer architecture (user / portable / repo-specific). Phase 1 removes accumulated cruft from previous experiments. Phase 2 documents the architecture and scaffolds clean directory structures at each layer.

## Phases

### Phase 1: Cleanup

**Goal**: Remove all legacy Claude configs, leaving only working GSD and credentials
**Depends on**: Nothing (first phase)
**Requirements**: CLEAN-01, CLEAN-02, CLEAN-03, CLEAN-04, CLEAN-05, CLEAN-06, CLEAN-07, CLEAN-08, CLEAN-09, CLEAN-10, CLEAN-11
**Success Criteria**:

1. User-level `~/.claude/` contains only GSD directory and `.credentials.json`
2. User-level `~/.claude/settings.json` references only GSD hooks (no legacy entries)
3. Repo-level `.claude/` is empty or contains only placeholder
4. GSD commands (`/gsd:*`) continue to work after cleanup

**Plans:** 2 plans

- [x] 01-01-PLAN.md — Remove legacy user-level ~/.claude/ files and update settings.json
- [x] 01-02-PLAN.md — Remove repo-level .claude/ contents and add .gitkeep placeholder

**Completed:** 2026-01-19

### Phase 2: Structure

**Goal**: Document three-layer architecture and create clean scaffolds at each layer
**Depends on**: Phase 1
**Requirements**: STRUCT-01, STRUCT-02, STRUCT-03, STRUCT-04
**Success Criteria**:

1. `_dotfiles/CLAUDE.md` documents the three-layer architecture with clear examples
2. Each layer (user/portable/repo) has documented ownership rules
3. Ansible playbook creates user-level scaffold on deployment
4. Repo-level `.claude/` has clean scaffold ready for future work

**Plans:** 1 plan

- [x] 02-01-PLAN.md — Document architecture in CLAUDE.md, create repo scaffold, update Ansible playbook

**Completed:** 2026-01-19

## Milestone Summary

**Key Decisions:**

- Keep only GSD + credentials at user level (clean slate approach)
- Three-layer config architecture (user / portable / repo)
- User layer (Ansible) owns scaffold structure; portables populate content
- Repo-level .claude/ uses subdirectory .gitkeeps instead of root .gitkeep
- Removed source files from tools/claude-code/ to prevent redeployment

**Issues Resolved:**

- Legacy configs cleaned from both user and repo levels
- Clear documentation now exists for where things belong

**Issues Deferred:**

- Autocommit improvements (Claude awareness, better messages, multi-agent git strategy)
- Feature explorer workflow (explore → propose → demo → configure → promote)

**Technical Debt Incurred:**

- Nerd Font glyphs in CLAUDE.md table were corrupted during editing (kept as cautionary example)

---

*For current project status, see .planning/ROADMAP.md (created for next milestone)*
