---
phase: 01-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - ~/.claude/hooks/auto-commit.sh
  - ~/.claude/commands/init-project.md
  - ~/.claude/commands/init-project.md.j2
  - ~/.claude/output-styles/
  - ~/.claude/plugins/
  - ~/.claude/CLAUDE.md
  - ~/.claude/settings.json
  - ~/.claude/agents/code-explainer.md
  - ~/.claude/agents/mention-scanner.md
  - ~/.claude/agents/planner.md
  - ~/.claude/agents/prd-manager.md
autonomous: true

must_haves:
  truths:
    - "~/.claude/hooks/ contains only gsd-check-update.js and statusline.js"
    - "~/.claude/commands/ contains only gsd/ subdirectory"
    - "~/.claude/output-styles/ does not exist"
    - "~/.claude/plugins/ does not exist"
    - "~/.claude/CLAUDE.md does not exist"
    - "~/.claude/agents/ contains only gsd-* files"
    - "~/.claude/settings.json has no auto-commit.sh reference"
  artifacts:
    - path: "~/.claude/settings.json"
      provides: "GSD-only hook configuration"
      contains: "gsd-check-update.js"
  key_links:
    - from: "~/.claude/settings.json"
      to: "~/.claude/hooks/gsd-check-update.js"
      via: "SessionStart hook"
      pattern: "gsd-check-update"
    - from: "~/.claude/settings.json"
      to: "~/.claude/hooks/statusline.js"
      via: "statusLine command"
      pattern: "statusline.js"
---

<objective>
Remove legacy Claude configurations from user-level ~/.claude/ directory

Purpose: Clean up accumulated cruft from previous experiments, leaving only working GSD system and credentials
Output: User-level claude directory with only GSD components and .credentials.json
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove legacy files and directories</name>
  <files>
    ~/.claude/hooks/auto-commit.sh
    ~/.claude/commands/init-project.md
    ~/.claude/commands/init-project.md.j2
    ~/.claude/output-styles/
    ~/.claude/plugins/
    ~/.claude/CLAUDE.md
    ~/.claude/agents/code-explainer.md
    ~/.claude/agents/mention-scanner.md
    ~/.claude/agents/planner.md
    ~/.claude/agents/prd-manager.md
  </files>
  <action>
    Remove the following files and directories:

    1. Remove legacy hook:
       - `~/.claude/hooks/auto-commit.sh`

    2. Remove legacy commands:
       - `~/.claude/commands/init-project.md`
       - `~/.claude/commands/init-project.md.j2`

    3. Remove entire directories:
       - `~/.claude/output-styles/` (contains: architect.md, no-frills.md, opinionated.md, reviewer.md, rubber-duck.md, terse.md, verbose.md)
       - `~/.claude/plugins/` (contains: known_marketplaces.json, marketplaces/)

    4. Remove legacy CLAUDE.md:
       - `~/.claude/CLAUDE.md`

    5. Remove non-GSD agents from ~/.claude/agents/:
       - `~/.claude/agents/code-explainer.md`
       - `~/.claude/agents/mention-scanner.md`
       - `~/.claude/agents/planner.md`
       - `~/.claude/agents/prd-manager.md`
       (Keep all gsd-*.md files)

    Use `rm` for files and `rm -rf` for directories.
  </action>
  <verify>
    Run these commands to verify:
    ```bash
    # Verify hooks - should only show gsd-check-update.js and statusline.js
    ls ~/.claude/hooks/

    # Verify commands - should only show gsd/ directory
    ls ~/.claude/commands/

    # Verify directories removed
    ls ~/.claude/output-styles/ 2>&1 | grep -q "No such file"
    ls ~/.claude/plugins/ 2>&1 | grep -q "No such file"

    # Verify CLAUDE.md removed
    ls ~/.claude/CLAUDE.md 2>&1 | grep -q "No such file"

    # Verify agents - should only show gsd-* files
    ls ~/.claude/agents/ | grep -v "^gsd-"
    ```
  </verify>
  <done>
    - ~/.claude/hooks/ contains only gsd-check-update.js and statusline.js
    - ~/.claude/commands/ contains only gsd/ subdirectory
    - ~/.claude/output-styles/ does not exist
    - ~/.claude/plugins/ does not exist
    - ~/.claude/CLAUDE.md does not exist
    - ~/.claude/agents/ contains only gsd-* files
  </done>
</task>

<task type="auto">
  <name>Task 2: Update settings.json to remove auto-commit hook</name>
  <files>~/.claude/settings.json</files>
  <action>
    Update `~/.claude/settings.json` to remove the auto-commit hook from PostToolUse.

    Current settings.json contains:
    ```json
    {
      "hooks": {
        "PostToolUse": [
          {
            "matcher": "Edit|Write",
            "hooks": [
              {
                "type": "command",
                "command": "~/.claude/hooks/auto-commit.sh"
              }
            ]
          }
        ],
        "SessionStart": [
          {
            "hooks": [
              {
                "type": "command",
                "command": "node \"$HOME/.claude/hooks/gsd-check-update.js\""
              }
            ]
          }
        ]
      },
      "statusLine": {
        "type": "command",
        "command": "node \"$HOME/.claude/hooks/statusline.js\""
      }
    }
    ```

    New settings.json should be (remove entire PostToolUse section):
    ```json
    {
      "hooks": {
        "SessionStart": [
          {
            "hooks": [
              {
                "type": "command",
                "command": "node \"$HOME/.claude/hooks/gsd-check-update.js\""
              }
            ]
          }
        ]
      },
      "statusLine": {
        "type": "command",
        "command": "node \"$HOME/.claude/hooks/statusline.js\""
      }
    }
    ```
  </action>
  <verify>
    Run:
    ```bash
    # Verify no auto-commit reference
    grep -q "auto-commit" ~/.claude/settings.json && echo "FAIL: auto-commit still present" || echo "PASS: no auto-commit"

    # Verify GSD hooks still present
    grep -q "gsd-check-update" ~/.claude/settings.json && echo "PASS: gsd-check-update present" || echo "FAIL: gsd-check-update missing"
    grep -q "statusline.js" ~/.claude/settings.json && echo "PASS: statusline present" || echo "FAIL: statusline missing"

    # Verify valid JSON
    cat ~/.claude/settings.json | python3 -m json.tool > /dev/null && echo "PASS: valid JSON" || echo "FAIL: invalid JSON"
    ```
  </verify>
  <done>
    - ~/.claude/settings.json has no reference to auto-commit.sh
    - ~/.claude/settings.json has SessionStart hook for gsd-check-update.js
    - ~/.claude/settings.json has statusLine command for statusline.js
    - File is valid JSON
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. List ~/.claude/ directory - should contain: .credentials.json, agents/, cache/, commands/, debug/, file-history/, get-shit-done/, history.jsonl, hooks/, paste-cache/, plans/, projects/, session-env/, settings.json, shell-snapshots/, stats-cache.json, statsig/, todos/
2. List ~/.claude/hooks/ - should contain only: gsd-check-update.js, statusline.js
3. List ~/.claude/commands/ - should contain only: gsd/
4. List ~/.claude/agents/ - should contain only gsd-*.md files
5. Verify ~/.claude/output-styles/ and ~/.claude/plugins/ do not exist
6. Verify ~/.claude/CLAUDE.md does not exist
7. Cat ~/.claude/settings.json and confirm no auto-commit reference, GSD hooks present
</verification>

<success_criteria>
Requirements satisfied:
- CLEAN-01: ~/.claude/hooks/auto-commit.sh removed
- CLEAN-02: ~/.claude/commands/init-project.md and init-project.md.j2 removed
- CLEAN-03: ~/.claude/output-styles/ directory removed
- CLEAN-04: ~/.claude/plugins/ directory removed
- CLEAN-05: ~/.claude/CLAUDE.md removed
- CLEAN-06: ~/.claude/settings.json updated to only reference GSD hooks
</success_criteria>

<output>
After completion, create `.planning/phases/01-cleanup/01-01-SUMMARY.md`
</output>
