---
phase: 01-lint-cleanup
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - setup.yml
  - tools/*/install_*.yml
  - themes/*.yml
autonomous: true

must_haves:
  truths:
    - "All plays have descriptive names"
    - "No unnamed import_playbook entries"
  artifacts:
    - path: "setup.yml"
      provides: "Named import_playbook entries"
  key_links:
    - from: "setup.yml"
      to: "import_playbook directives"
      via: "name field on each play"
      pattern: "- name:.*\\n\\s+import_playbook:"
---

<objective>
Fix name[play] violations by adding names to all plays

Purpose: Address 100 name[play] violations. Each import_playbook directive and inline play needs a descriptive name.

Output: All plays in setup.yml and any other files have `name:` fields.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@setup.yml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add names to import_playbook directives in setup.yml</name>
  <files>setup.yml</files>
  <action>
Convert each bare `import_playbook:` to have a descriptive name.

Current pattern:
```yaml
- import_playbook: tools/zsh/install_zsh.yml
```

Target pattern:
```yaml
- name: Install zsh
  import_playbook: tools/zsh/install_zsh.yml
```

Naming convention:
- For tools: "Install {tool_name}" (derive from directory name, capitalize appropriately)
- For themes: "Apply {theme_type} theme" (e.g., "Apply color theme")
- For OS-specific: "Configure {os_name}" (e.g., "Configure macOS")

Special cases in setup.yml that already have names (keep them):
- "Prevent sleep during setup (macOS)"
- "Update Homebrew (macOS)"
- "Update apt cache (Debian)"
- "Update pacman cache (Arch)"
- "Clone and update dotfiles repo"

Count of import_playbook lines needing names: approximately 95-100
  </action>
  <verify>
Run `ansible-lint setup.yml 2>&1 | grep -c 'name\[play\]'` and verify count is 0.
  </verify>
  <done>Zero name[play] violations remain</done>
</task>

<task type="auto">
  <name>Task 2: Add names to any unnamed plays in tool playbooks</name>
  <files>tools/*/install_*.yml</files>
  <action>
Check each tool playbook for unnamed plays. Most should already have names like:
```yaml
- name: Install and configure {tool}
  hosts: all
```

If any play lacks a name, add one following the pattern "Install and configure {tool_name}".

Run: `grep -L "^- name:" tools/*/install_*.yml` to find files missing top-level play names.

For most files, this task may be a no-op if they already have names.
  </action>
  <verify>
Run `ansible-lint tools/*/install_*.yml 2>&1 | grep -c 'name\[play\]'` - should be 0.
  </verify>
  <done>All tool playbooks have named plays</done>
</task>

</tasks>

<verification>
After completing both tasks:
1. Run `ansible-lint setup.yml 2>&1 | grep 'name\[play\]' | wc -l` - should be 0
2. Verify setup.yml structure looks clean with all imports named
3. Spot-check that names are descriptive and follow the convention
</verification>

<success_criteria>
- Zero name[play] violations across all files
- All names are descriptive and consistent
- setup.yml remains valid YAML
</success_criteria>

<output>
After completion, create `.planning/phases/01-lint-cleanup/01-02-SUMMARY.md`
</output>
