---
- name: Prevent sleep during setup (macOS)
  hosts: macs
  gather_facts: false
  tasks:
    - name: Disable sleep
      command: pmset -a disablesleep 1
      become: yes

- name: Update apt cache (Debian)
  hosts: debian
  gather_facts: false
  tasks:
    - name: Update apt cache
      apt:
        update_cache: yes
      become: yes

- import_playbook: install_essentials.yml
- import_playbook: tools/ssh/install_ssh.yml
- import_playbook: tools/mosh/install_mosh.yml
- import_playbook: install_homebrew.yml
- import_playbook: tools/mas/install_mas.yml
- import_playbook: install_ansible.yml
- import_playbook: tools/zsh/install_zsh.yml
- import_playbook: tools/node/install_node.yml
- import_playbook: tools/python/install_python.yml
- import_playbook: tools/rust/install_rust.yml
- import_playbook: tools/go/install_go.yml
- import_playbook: tools/tmux/install_tmux.yml
- import_playbook: tools/neovim/install_neovim.yml
- import_playbook: tools/sd/install_sd.yml
- import_playbook: tools/fd/install_fd.yml
- import_playbook: tools/ripgrep/install_ripgrep.yml
- import_playbook: tools/fzf/install_fzf.yml
- import_playbook: tools/jq/install_jq.yml
- import_playbook: tools/bat/install_bat.yml
- import_playbook: tools/eza/install_eza.yml
- import_playbook: tools/tree/install_tree.yml
- import_playbook: tools/wget/install_wget.yml
- import_playbook: tools/yt-dlp/install_yt-dlp.yml
- import_playbook: tools/ffmpeg/install_ffmpeg.yml
- import_playbook: tools/imagemagick/install_imagemagick.yml
- import_playbook: tools/pandoc/install_pandoc.yml
- import_playbook: tools/asciiquarium/install_asciiquarium.yml
- import_playbook: tools/lazygit/install_lazygit.yml
- import_playbook: tools/wireguard/install_wireguard.yml
- import_playbook: tools/wireguard_gui/install_wireguard_gui.yml
- import_playbook: tools/1password_cli/install_1password_cli.yml
- import_playbook: tools/doctl/install_doctl.yml
- import_playbook: tools/pulumi/install_pulumi.yml
- import_playbook: tools/awscli/install_awscli.yml
- import_playbook: tools/gh/install_gh.yml
- import_playbook: tools/gcloud/install_gcloud.yml
- import_playbook: tools/claude-code/install_claude-code.yml
- import_playbook: tools/1password/install_1password.yml
- import_playbook: tools/iterm2/install_iterm2.yml
- import_playbook: tools/dbeaver/install_dbeaver.yml
- import_playbook: tools/chrome/install_chrome.yml
- import_playbook: tools/chromium/install_chromium.yml
- import_playbook: tools/chrome_canary/install_chrome_canary.yml
- import_playbook: tools/firefox/install_firefox.yml
- import_playbook: tools/firefox_developer/install_firefox_developer.yml
- import_playbook: tools/opera/install_opera.yml
- import_playbook: tools/vivaldi/install_vivaldi.yml
- import_playbook: tools/brave/install_brave.yml
- import_playbook: tools/arc/install_arc.yml
- import_playbook: tools/edge/install_edge.yml
- import_playbook: tools/tor/install_tor.yml
- import_playbook: tools/librewolf/install_librewolf.yml
- import_playbook: tools/waterfox/install_waterfox.yml
- import_playbook: tools/zen/install_zen.yml
- import_playbook: tools/orion/install_orion.yml
- import_playbook: tools/mullvad/install_mullvad.yml
- import_playbook: tools/min/install_min.yml

- name: Allow sleep after setup (macOS)
  hosts: macs
  gather_facts: false
  tasks:
    - name: Re-enable sleep
      command: pmset -a disablesleep 0
      become: yes
