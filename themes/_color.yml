# Shared color scheme logic
#
# Do not run directly. Use wrapper playbooks:
#   ansible-playbook themes/colors_nord.yml
#   ansible-playbook themes/colors_dracula.yml
#   etc.
#
# Or run with -e color=<name>:
#   ansible-playbook themes/_color.yml -e color=nord
- name: Apply color scheme
  hosts: all
  gather_facts: true
  vars:
    # All color schemes - add new themes here
    colors:
      nord:
        name: "Nord"
        bg: "#2e3440"
        bg_hl: "#3b4252"
        fg: "#d8dee9"
        fg_dim: "#4c566a"
        fg_bright: "#eceff4"
        accent: "#81a1c1"
        accent_dark: "#2e3440"
        cyan: "#88c0d0"
        green: "#a3be8c"
        red: "#bf616a"
        magenta: "#b48ead"
        wezterm: "nord"
        nvim: "nord"
        bat: "Nord"
      dracula:
        name: "Dracula"
        bg: "#282a36"
        bg_hl: "#44475a"
        fg: "#f8f8f2"
        fg_dim: "#6272a4"
        fg_bright: "#f8f8f2"
        accent: "#bd93f9"
        accent_dark: "#21222c"
        cyan: "#8be9fd"
        green: "#50fa7b"
        red: "#ff5555"
        magenta: "#ff79c6"
        wezterm: "Dracula"
        nvim: "dracula"
        bat: "Dracula"
      gruvbox:
        name: "Gruvbox Dark"
        bg: "#282828"
        bg_hl: "#3c3836"
        fg: "#ebdbb2"
        fg_dim: "#928374"
        fg_bright: "#ebdbb2"
        accent: "#83a598"
        accent_dark: "#1d2021"
        cyan: "#8ec07c"
        green: "#b8bb26"
        red: "#fb4934"
        magenta: "#d3869b"
        wezterm: "Gruvbox Dark (Gogh)"
        nvim: "gruvbox"
        bat: "gruvbox-dark"
      catppuccin_mocha:
        name: "Catppuccin Mocha"
        bg: "#1e1e2e"
        bg_hl: "#313244"
        fg: "#cdd6f4"
        fg_dim: "#6c7086"
        fg_bright: "#cdd6f4"
        accent: "#89b4fa"
        accent_dark: "#1e1e2e"
        cyan: "#94e2d5"
        green: "#a6e3a1"
        red: "#f38ba8"
        magenta: "#cba6f7"
        wezterm: "Catppuccin Mocha"
        nvim: "catppuccin-mocha"
        bat: "Catppuccin Mocha"
      catppuccin_latte:
        name: "Catppuccin Latte"
        bg: "#eff1f5"
        bg_hl: "#ccd0da"
        fg: "#4c4f69"
        fg_dim: "#6c6f85"
        fg_bright: "#4c4f69"
        accent: "#1e66f5"
        accent_dark: "#e6e9ef"
        cyan: "#179299"
        green: "#40a02b"
        red: "#d20f39"
        magenta: "#8839ef"
        wezterm: "Catppuccin Latte"
        nvim: "catppuccin-latte"
        bat: "Catppuccin Latte"
      onedark:
        name: "One Dark"
        bg: "#282c34"
        bg_hl: "#353b45"
        fg: "#abb2bf"
        fg_dim: "#5c6370"
        fg_bright: "#abb2bf"
        accent: "#61afef"
        accent_dark: "#282c34"
        cyan: "#56b6c2"
        green: "#98c379"
        red: "#e06c75"
        magenta: "#c678dd"
        wezterm: "One Dark (Gogh)"
        nvim: "onedark"
        bat: "OneHalfDark"
      solarized_dark:
        name: "Solarized Dark"
        bg: "#002b36"
        bg_hl: "#073642"
        fg: "#839496"
        fg_dim: "#586e75"
        fg_bright: "#93a1a1"
        accent: "#268bd2"
        accent_dark: "#002b36"
        cyan: "#2aa198"
        green: "#859900"
        red: "#dc322f"
        magenta: "#6c71c4"
        wezterm: "Solarized Dark (Gogh)"
        nvim: "solarized"
        bat: "Solarized (dark)"
      tokyonight:
        name: "TokyoNight Storm"
        bg: "#24283b"
        bg_hl: "#3b4261"
        fg: "#c0caf5"
        fg_dim: "#565f89"
        fg_bright: "#c0caf5"
        accent: "#7aa2f7"
        accent_dark: "#1a1b26"
        cyan: "#7dcfff"
        green: "#9ece6a"
        red: "#f7768e"
        magenta: "#bb9af7"
        wezterm: "tokyonight"
        nvim: "tokyonight-night"
        bat: "tokyonight_storm"
    c: "{{ colors[color] }}"
  tasks:
    - name: Validate color parameter
      ansible.builtin.fail:
        msg: "Unknown color '{{ color }}'. Valid: {{ colors.keys() | list | join(', ') }}"
      when: color not in colors

    # ===================
    # TMUX
    # ===================
    - name: Update tmux status-style
      ansible.builtin.replace:
        path: ~/.tmux.conf
        regexp: 'status-style "bg=#[0-9a-fA-F]{6},fg=#[0-9a-fA-F]{6}"'
        replace: 'status-style "bg={{ c.bg }},fg={{ c.fg }}"'

    - name: Update tmux status-left
      ansible.builtin.replace:
        path: ~/.tmux.conf
        regexp: 'status-left "#\[fg=#[0-9a-fA-F]{6},bg=#[0-9a-fA-F]{6},bold\](.+?)#\[fg=#[0-9a-fA-F]{6},bg=#[0-9a-fA-F]{6}\](.+?)#\[fg=#[0-9a-fA-F]{6},bg=#[0-9a-fA-F]{6}\](.+?)#\[fg=#[0-9a-fA-F]{6},bg=#[0-9a-fA-F]{6}\]'
        replace: 'status-left "#[fg={{ c.accent_dark }},bg={{ c.accent }},bold]\1#[fg={{ c.accent }},bg={{ c.bg_hl }}]\2#[fg={{ c.fg }},bg={{ c.bg_hl }}]\3#[fg={{ c.bg_hl }},bg={{ c.bg }}]'

    - name: Update tmux status-right
      ansible.builtin.replace:
        path: ~/.tmux.conf
        regexp: 'status-right "#\[fg=#[0-9a-fA-F]{6},bg=#[0-9a-fA-F]{6}\](.+?)#\[fg=#[0-9a-fA-F]{6},bg=#[0-9a-fA-F]{6}\](.+?)#\[fg=#[0-9a-fA-F]{6},bg=#[0-9a-fA-F]{6}\](.+?)#\[fg=#[0-9a-fA-F]{6},bg=#[0-9a-fA-F]{6},bold\]'
        replace: 'status-right "#[fg={{ c.bg_hl }},bg={{ c.bg }}]\1#[fg={{ c.fg }},bg={{ c.bg_hl }}]\2#[fg={{ c.accent }},bg={{ c.bg_hl }}]\3#[fg={{ c.accent_dark }},bg={{ c.accent }},bold]'

    - name: Update tmux window-status-format
      ansible.builtin.replace:
        path: ~/.tmux.conf
        regexp: 'window-status-format "#\[fg=#[0-9a-fA-F]{6},bg=#[0-9a-fA-F]{6}\]'
        replace: 'window-status-format "#[fg={{ c.fg_dim }},bg={{ c.bg }}]'

    - name: Update tmux window-status-current-format
      ansible.builtin.replace:
        path: ~/.tmux.conf
        regexp: 'window-status-current-format "#\[fg=#[0-9a-fA-F]{6},bg=#[0-9a-fA-F]{6}\](.+?)#\[fg=#[0-9a-fA-F]{6},bg=#[0-9a-fA-F]{6},bold\](.+?)#\[fg=#[0-9a-fA-F]{6},bg=#[0-9a-fA-F]{6}\]([^"]+)"'
        replace: 'window-status-current-format "#[fg={{ c.bg }},bg={{ c.accent }}]\1#[fg={{ c.accent_dark }},bg={{ c.accent }},bold]\2#[fg={{ c.accent }},bg={{ c.bg }}]\3"'

    - name: Update tmux pane-border-style
      ansible.builtin.replace:
        path: ~/.tmux.conf
        regexp: 'pane-border-style "fg=#[0-9a-fA-F]{6}"'
        replace: 'pane-border-style "fg={{ c.bg_hl }}"'

    - name: Update tmux pane-active-border-style
      ansible.builtin.replace:
        path: ~/.tmux.conf
        regexp: 'pane-active-border-style "fg=#[0-9a-fA-F]{6}"'
        replace: 'pane-active-border-style "fg={{ c.accent }}"'

    - name: Update tmux window-style (inactive pane dimming)
      ansible.builtin.replace:
        path: ~/.tmux.conf
        regexp: "window-style 'fg=#[0-9a-fA-F]{6},bg=#[0-9a-fA-F]{6}'"
        replace: "window-style 'fg={{ c.fg_dim }},bg={{ c.accent_dark }}'"

    - name: Update tmux window-active-style (active pane)
      ansible.builtin.replace:
        path: ~/.tmux.conf
        regexp: "window-active-style 'fg=#[0-9a-fA-F]{6},bg=#[0-9a-fA-F]{6}'"
        replace: "window-active-style 'fg={{ c.fg }},bg={{ c.bg }}'"

    - name: Update tmux message-style
      ansible.builtin.replace:
        path: ~/.tmux.conf
        regexp: 'message-style "bg=#[0-9a-fA-F]{6},fg=#[0-9a-fA-F]{6}"'
        replace: 'message-style "bg={{ c.bg_hl }},fg={{ c.accent }}"'

    - name: Update tmux message-command-style
      ansible.builtin.replace:
        path: ~/.tmux.conf
        regexp: 'message-command-style "bg=#[0-9a-fA-F]{6},fg=#[0-9a-fA-F]{6}"'
        replace: 'message-command-style "bg={{ c.bg_hl }},fg={{ c.accent }}"'

    - name: Update tmux mode-style
      ansible.builtin.replace:
        path: ~/.tmux.conf
        regexp: 'mode-style "bg=#[0-9a-fA-F]{6},fg=#[0-9a-fA-F]{6}"'
        replace: 'mode-style "bg={{ c.bg_hl }},fg={{ c.accent }}"'

    - name: Update tmux theme comment
      ansible.builtin.replace:
        path: ~/.tmux.conf
        regexp: '^# .+ colors$'
        replace: '# {{ c.name }} colors'

    - name: Reload tmux config
      ansible.builtin.shell: tmux source-file ~/.tmux.conf
      ignore_errors: true

    # ===================
    # WEZTERM (GUI - skip if not installed)
    # ===================
    - name: Check if wezterm config exists
      ansible.builtin.stat:
        path: ~/.wezterm.lua
      register: wezterm_config

    - name: Update wezterm color scheme
      ansible.builtin.replace:
        path: ~/.wezterm.lua
        regexp: 'color_scheme = "[^"]+"'
        replace: 'color_scheme = "{{ c.wezterm }}"'
      when: wezterm_config.stat.exists

    # ===================
    # STARSHIP
    # ===================
    - name: Update starship style_user colors
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(style_user = "fg:#)[0-9a-fA-F]{6}( bg:#)[0-9a-fA-F]{6}( bold")'
        replace: '\g<1>{{ c.accent_dark | replace("#", "") }}\g<2>{{ c.accent | replace("#", "") }}\g<3>'

    - name: Update starship style_root colors
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(style_root = "fg:#)[0-9a-fA-F]{6}( bg:#)[0-9a-fA-F]{6}( bold")'
        replace: '\g<1>{{ c.accent_dark | replace("#", "") }}\g<2>{{ c.red | replace("#", "") }}\g<3>'

    - name: Update starship username format colors
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(\$user.+\]\(fg:#)[0-9a-fA-F]{6}( bg:#)[0-9a-fA-F]{6}(\)")'
        replace: '\g<1>{{ c.accent | replace("#", "") }}\g<2>{{ c.bg_hl | replace("#", "") }}\g<3>'

    - name: Update starship hostname style colors
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(\[hostname\]\nssh_only = false\nstyle = "fg:#)[0-9a-fA-F]{6}( bg:#)[0-9a-fA-F]{6}(")'
        replace: '\g<1>{{ c.fg | replace("#", "") }}\g<2>{{ c.bg_hl | replace("#", "") }}\g<3>'

    - name: Update starship hostname format colors
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(\$hostname.+\]\(fg:#)[0-9a-fA-F]{6}( bg:#)[0-9a-fA-F]{6}(\)")'
        replace: '\g<1>{{ c.bg_hl | replace("#", "") }}\g<2>{{ c.fg_dim | replace("#", "") }}\g<3>'

    - name: Update starship directory style colors
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(\[directory\]\nstyle = "fg:#)[0-9a-fA-F]{6}( bg:#)[0-9a-fA-F]{6}( bold")'
        replace: '\g<1>{{ c.fg | replace("#", "") }}\g<2>{{ c.fg_dim | replace("#", "") }}\g<3>'

    - name: Update starship git_branch style colors
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(\[git_branch\]\nstyle = "fg:#)[0-9a-fA-F]{6}( bg:#)[0-9a-fA-F]{6}( bold")'
        replace: '\g<1>{{ c.fg | replace("#", "") }}\g<2>{{ c.bg_hl | replace("#", "") }}\g<3>'

    - name: Update starship git_branch format colors
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(format = "\[[^\]]*\]\(fg:#)[0-9a-fA-F]{6}( bg:#)[0-9a-fA-F]{6}(\)\[.+\$branch)'
        replace: '\g<1>{{ c.fg_dim | replace("#", "") }}\g<2>{{ c.bg_hl | replace("#", "") }}\g<3>'

    - name: Update starship git_status style colors
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(\[git_status\]\nstyle = "fg:#)[0-9a-fA-F]{6}( bg:#)[0-9a-fA-F]{6}(")'
        replace: '\g<1>{{ c.fg | replace("#", "") }}\g<2>{{ c.bg_hl | replace("#", "") }}\g<3>'

    - name: Update starship git_status format color
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(\$all_status.+\]\(fg:#)[0-9a-fA-F]{6}(\)")'
        replace: '\g<1>{{ c.bg_hl | replace("#", "") }}\g<2>'

    - name: Update starship custom dir_end color
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(\[custom\.dir_end\][\s\S]*?format = "\[[^\]]*\]\(fg:#)[0-9a-fA-F]{6}(\)")'
        replace: '\g<1>{{ c.fg_dim | replace("#", "") }}\g<2>'

    - name: Update starship jobs style color
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(\[jobs\]\nstyle = "fg:#)[0-9a-fA-F]{6}(")'
        replace: '\g<1>{{ c.accent | replace("#", "") }}\g<2>'

    - name: Update starship cmd_duration style color
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(\[cmd_duration\]\nmin_time = 0\nstyle = "fg:#)[0-9a-fA-F]{6}(")'
        replace: '\g<1>{{ c.fg_dim | replace("#", "") }}\g<2>'

    - name: Update starship time style color
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(\[time\]\ndisabled = false\nstyle = "fg:#)[0-9a-fA-F]{6}(")'
        replace: '\g<1>{{ c.fg_dim | replace("#", "") }}\g<2>'

    - name: Update starship character success color
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(success_symbol = ".+bold #)[0-9a-fA-F]{6}(\)")'
        replace: '\g<1>{{ c.green | replace("#", "") }}\g<2>'

    - name: Update starship character error color
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '(error_symbol = ".+bold #)[0-9a-fA-F]{6}(\)")'
        replace: '\g<1>{{ c.red | replace("#", "") }}\g<2>'

    - name: Update starship theme comment
      ansible.builtin.replace:
        path: ~/.config/starship.toml
        regexp: '^# Starship configuration - .+$'
        replace: '# Starship configuration - {{ c.name }} theme'

    # ===================
    # NEOVIM
    # ===================
    - name: Update neovim colorscheme
      ansible.builtin.replace:
        path: ~/.config/nvim/init.lua
        regexp: "vim\\.cmd\\.colorscheme '[^']+'"
        replace: "vim.cmd.colorscheme '{{ c.nvim }}'"

    - name: Update neovim StMode highlight
      ansible.builtin.replace:
        path: ~/.config/nvim/init.lua
        regexp: "vim\\.api\\.nvim_set_hl\\(0, 'StMode', \\{ fg = '#[0-9a-fA-F]{6}', bg = '#[0-9a-fA-F]{6}', bold = true \\}\\)"
        replace: "vim.api.nvim_set_hl(0, 'StMode', { fg = '{{ c.accent_dark }}', bg = '{{ c.accent }}', bold = true })"

    - name: Update neovim StModeSep highlight
      ansible.builtin.replace:
        path: ~/.config/nvim/init.lua
        regexp: "vim\\.api\\.nvim_set_hl\\(0, 'StModeSep', \\{ fg = '#[0-9a-fA-F]{6}', bg = '#[0-9a-fA-F]{6}' \\}\\)"
        replace: "vim.api.nvim_set_hl(0, 'StModeSep', { fg = '{{ c.accent }}', bg = '{{ c.bg }}' })"

    - name: Update neovim StFile highlight
      ansible.builtin.replace:
        path: ~/.config/nvim/init.lua
        regexp: "vim\\.api\\.nvim_set_hl\\(0, 'StFile', \\{ fg = '#[0-9a-fA-F]{6}', bg = '#[0-9a-fA-F]{6}' \\}\\)"
        replace: "vim.api.nvim_set_hl(0, 'StFile', { fg = '{{ c.fg_dim }}', bg = '{{ c.bg }}' })"

    - name: Update neovim StGitSep highlight
      ansible.builtin.replace:
        path: ~/.config/nvim/init.lua
        regexp: "vim\\.api\\.nvim_set_hl\\(0, 'StGitSep', \\{ fg = '#[0-9a-fA-F]{6}', bg = '#[0-9a-fA-F]{6}' \\}\\)"
        replace: "vim.api.nvim_set_hl(0, 'StGitSep', { fg = '{{ c.bg }}', bg = '{{ c.bg_hl }}' })"

    - name: Update neovim StGit highlight
      ansible.builtin.replace:
        path: ~/.config/nvim/init.lua
        regexp: "vim\\.api\\.nvim_set_hl\\(0, 'StGit', \\{ fg = '#[0-9a-fA-F]{6}', bg = '#[0-9a-fA-F]{6}' \\}\\)"
        replace: "vim.api.nvim_set_hl(0, 'StGit', { fg = '{{ c.fg }}', bg = '{{ c.bg_hl }}' })"

    # ===================
    # LAZYGIT
    # ===================
    - name: Update lazygit activeBorderColor
      ansible.builtin.replace:
        path: ~/.config/lazygit/config.yml
        regexp: 'activeBorderColor:\n\s+- "#[0-9a-fA-F]{6}"'
        replace: 'activeBorderColor:\n      - "{{ c.accent }}"'

    - name: Update lazygit inactiveBorderColor
      ansible.builtin.replace:
        path: ~/.config/lazygit/config.yml
        regexp: 'inactiveBorderColor:\n\s+- "#[0-9a-fA-F]{6}"'
        replace: 'inactiveBorderColor:\n      - "{{ c.fg_dim }}"'

    - name: Update lazygit optionsTextColor
      ansible.builtin.replace:
        path: ~/.config/lazygit/config.yml
        regexp: 'optionsTextColor:\n\s+- "#[0-9a-fA-F]{6}"'
        replace: 'optionsTextColor:\n      - "{{ c.cyan }}"'

    - name: Update lazygit selectedLineBgColor
      ansible.builtin.replace:
        path: ~/.config/lazygit/config.yml
        regexp: 'selectedLineBgColor:\n\s+- "#[0-9a-fA-F]{6}"'
        replace: 'selectedLineBgColor:\n      - "{{ c.bg_hl }}"'

    - name: Update lazygit cherryPickedCommitBgColor
      ansible.builtin.replace:
        path: ~/.config/lazygit/config.yml
        regexp: 'cherryPickedCommitBgColor:\n\s+- "#[0-9a-fA-F]{6}"'
        replace: 'cherryPickedCommitBgColor:\n      - "{{ c.bg_hl }}"'

    - name: Update lazygit cherryPickedCommitFgColor
      ansible.builtin.replace:
        path: ~/.config/lazygit/config.yml
        regexp: 'cherryPickedCommitFgColor:\n\s+- "#[0-9a-fA-F]{6}"'
        replace: 'cherryPickedCommitFgColor:\n      - "{{ c.magenta }}"'

    - name: Update lazygit unstagedChangesColor
      ansible.builtin.replace:
        path: ~/.config/lazygit/config.yml
        regexp: 'unstagedChangesColor:\n\s+- "#[0-9a-fA-F]{6}"'
        replace: 'unstagedChangesColor:\n      - "{{ c.red }}"'

    - name: Update lazygit defaultFgColor
      ansible.builtin.replace:
        path: ~/.config/lazygit/config.yml
        regexp: 'defaultFgColor:\n\s+- "#[0-9a-fA-F]{6}"'
        replace: 'defaultFgColor:\n      - "{{ c.fg }}"'

    - name: Update lazygit searchingActiveBorderColor
      ansible.builtin.replace:
        path: ~/.config/lazygit/config.yml
        regexp: 'searchingActiveBorderColor:\n\s+- "#[0-9a-fA-F]{6}"'
        replace: 'searchingActiveBorderColor:\n      - "{{ c.green }}"'

    - name: Update lazygit theme comment
      ansible.builtin.replace:
        path: ~/.config/lazygit/config.yml
        regexp: '^# lazygit configuration - .+ theme$'
        replace: '# lazygit configuration - {{ c.name }} theme'

    # ===================
    # BAT
    # ===================
    - name: Update bat theme
      ansible.builtin.replace:
        path: ~/.config/zsh/bat.zsh
        regexp: 'BAT_THEME="[^"]+"'
        replace: 'BAT_THEME="{{ c.bat }}"'

    - name: Update bat theme comment
      ansible.builtin.replace:
        path: ~/.config/zsh/bat.zsh
        regexp: '^# Bat configuration - .+ theme$'
        replace: '# Bat configuration - {{ c.name }} theme'

    # ===================
    # FZF
    # ===================
    - name: Update fzf fg color
      ansible.builtin.replace:
        path: ~/.config/zsh/fzf.zsh
        regexp: 'fg:#[0-9a-fA-F]{6}'
        replace: 'fg:{{ c.fg }}'

    - name: Update fzf bg color
      ansible.builtin.replace:
        path: ~/.config/zsh/fzf.zsh
        regexp: 'bg:#[0-9a-fA-F]{6}'
        replace: 'bg:{{ c.bg }}'

    - name: Update fzf hl color
      ansible.builtin.replace:
        path: ~/.config/zsh/fzf.zsh
        regexp: 'hl:#[0-9a-fA-F]{6}'
        replace: 'hl:{{ c.accent }}'

    - name: Update fzf fg+ color
      ansible.builtin.replace:
        path: ~/.config/zsh/fzf.zsh
        regexp: 'fg\+:#[0-9a-fA-F]{6}'
        replace: 'fg+:{{ c.fg_bright }}'

    - name: Update fzf bg+ color
      ansible.builtin.replace:
        path: ~/.config/zsh/fzf.zsh
        regexp: 'bg\+:#[0-9a-fA-F]{6}'
        replace: 'bg+:{{ c.bg_hl }}'

    - name: Update fzf hl+ color
      ansible.builtin.replace:
        path: ~/.config/zsh/fzf.zsh
        regexp: 'hl\+:#[0-9a-fA-F]{6}'
        replace: 'hl+:{{ c.cyan }}'

    - name: Update fzf info color
      ansible.builtin.replace:
        path: ~/.config/zsh/fzf.zsh
        regexp: 'info:#[0-9a-fA-F]{6}'
        replace: 'info:{{ c.green }}'

    - name: Update fzf prompt color
      ansible.builtin.replace:
        path: ~/.config/zsh/fzf.zsh
        regexp: 'prompt:#[0-9a-fA-F]{6}'
        replace: 'prompt:{{ c.accent }}'

    - name: Update fzf pointer color
      ansible.builtin.replace:
        path: ~/.config/zsh/fzf.zsh
        regexp: 'pointer:#[0-9a-fA-F]{6}'
        replace: 'pointer:{{ c.magenta }}'

    - name: Update fzf marker color
      ansible.builtin.replace:
        path: ~/.config/zsh/fzf.zsh
        regexp: 'marker:#[0-9a-fA-F]{6}'
        replace: 'marker:{{ c.green }}'

    - name: Update fzf spinner color
      ansible.builtin.replace:
        path: ~/.config/zsh/fzf.zsh
        regexp: 'spinner:#[0-9a-fA-F]{6}'
        replace: 'spinner:{{ c.magenta }}'

    - name: Update fzf header color
      ansible.builtin.replace:
        path: ~/.config/zsh/fzf.zsh
        regexp: 'header:#[0-9a-fA-F]{6}'
        replace: 'header:{{ c.accent }}'

    - name: Update fzf theme comment
      ansible.builtin.replace:
        path: ~/.config/zsh/fzf.zsh
        regexp: '^# FZF configuration - .+ theme$'
        replace: '# FZF configuration - {{ c.name }} theme'

    # ===================
    # LAZYDOCKER
    # ===================
    - name: Update lazydocker activeBorderColor
      ansible.builtin.replace:
        path: ~/.config/lazydocker/config.yml
        regexp: 'activeBorderColor:\n\s+- "#[0-9a-fA-F]{6}"'
        replace: 'activeBorderColor:\n      - "{{ c.accent }}"'

    - name: Update lazydocker inactiveBorderColor
      ansible.builtin.replace:
        path: ~/.config/lazydocker/config.yml
        regexp: 'inactiveBorderColor:\n\s+- "#[0-9a-fA-F]{6}"'
        replace: 'inactiveBorderColor:\n      - "{{ c.fg_dim }}"'

    - name: Update lazydocker optionsTextColor
      ansible.builtin.replace:
        path: ~/.config/lazydocker/config.yml
        regexp: 'optionsTextColor:\n\s+- "#[0-9a-fA-F]{6}"'
        replace: 'optionsTextColor:\n      - "{{ c.cyan }}"'

    - name: Update lazydocker selectedLineBgColor
      ansible.builtin.replace:
        path: ~/.config/lazydocker/config.yml
        regexp: 'selectedLineBgColor:\n\s+- "#[0-9a-fA-F]{6}"'
        replace: 'selectedLineBgColor:\n      - "{{ c.bg_hl }}"'

